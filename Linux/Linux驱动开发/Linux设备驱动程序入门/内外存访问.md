----------

#### 内外存访问 ####

8/16/2019 4: 58: 27 PM 

Author：terrycoder

----------


#### 内存分配 ####


kmalloc函数在物理内存中为程序分配一个连续的存储空间。存储空间的数据不会被清零，就是保存内存中原有的数据。kmalloc()函数运行分配内存时不允许阻塞，原型如下：

	static inline void* kmalloc(size_t size,gfp_t flags)

kmalloc 函数的第一个参数是size，表示分配内存的大小，第二个参数是分配标志。

Linux内核对kmalloc()函数的处理方式是，先分配一系列不同大小的内存池，每一个内存池中的内存大小是固定的。当分配内存时，就将包含足够大的内存池中的内存传递给kmalloc()函数。在分配内存时，Linux内核只能分配预定义、固定大小的字节数。如果申请的内存大小不是2的整数倍，则会多申请一些内存，将大于申请内存的内存区块返回给请求者。

Linux内核为kmalloc()提供了 32、64、128、256、512、1024、2048、4096字节，8、16、32、64、128KB的内存池。

